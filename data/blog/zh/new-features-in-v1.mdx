---
title: 'v1 ä¸­çš„æ–°åŠŸèƒ½'
date: 2021-08-07T15:32:14Z
lastmod: '2021-02-01'
tags: ['next-js', 'tailwind', 'guide']
draft: false
summary: 'v1 ä¸­å‘å¸ƒçš„æ–°åŠŸèƒ½æ¦‚è¿° - ä»£ç å—å¤åˆ¶ã€å¤šä½ä½œè€…ã€frontmatter å¸ƒå±€ç­‰'
layout: PostSimple
bibliography: references-data.bib
translationOf: new-features-in-v1
---

## æ¦‚è¿°

å…³äº v1.0 ä¸­å¼•å…¥çš„æ–°åŠŸèƒ½çš„æ–‡ç« ã€‚æ–°åŠŸèƒ½ï¼š

<TOCInline toc={props.toc} exclude="Overview" toHeading={2} />

å°½ç®¡æ·»åŠ äº†æ‰€æœ‰æ–°åŠŸèƒ½ï¼Œé¦–æ¬¡åŠ è½½çš„ JS ä» 43kB å‡å°‘åˆ° 39kBï¼[^1]

[^1]: éšç€ Nextjs 12 ä¸­çš„æ–°å˜åŒ–ï¼Œé¦–æ¬¡åŠ è½½ JS å¢åŠ åˆ° 45kBã€‚

è¯·å‚é˜…ä¸‹é¢çš„ [å‡çº§æŒ‡å—](#upgrade-guide)ï¼Œå¦‚æœæ‚¨æ­£åœ¨ä»æ¨¡æ¿çš„ v0 ç‰ˆæœ¬è¿ç§»ã€‚

## ä¸»é¢˜é¢œè‰²

æ‚¨å¯ä»¥é€šè¿‡æ›´æ”¹ tailwind é…ç½®æ–‡ä»¶ä¸­çš„ primary å±æ€§è½»æ¾ä¿®æ”¹ä¸»é¢˜é¢œè‰²ï¼š

```js:tailwind.config.js
theme: {
    colors: {
      primary: colors.teal,
      gray: colors.neutral,
      ...
    }
  ...
}
```

primary é¢œè‰²å±æ€§åº”è¯¥è¢«åˆ†é…ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶é”®ä¸º 50ã€100ã€200 ... 900ï¼Œä»¥åŠç›¸åº”çš„é¢œè‰²ä»£ç å€¼ã€‚

Tailwind åŒ…å«äº†å¾ˆæ£’çš„é»˜è®¤è°ƒè‰²æ¿ï¼Œå¯ç”¨äºä¸ºä¸»é¢˜åŒ–æ‚¨çš„ç½‘ç«™ã€‚æŸ¥çœ‹ [è‡ªå®šä¹‰é¢œè‰²æ–‡æ¡£é¡µé¢](https://tailwindcss.com/docs/customizing-colors) äº†è§£å…¨éƒ¨é€‰é¡¹ã€‚

ä» v1 è¿ç§»ï¼Ÿæ‚¨å¯ä»¥é€šè¿‡å°† `primary` è®¾ç½®ä¸º `colors.sky`ï¼ˆTailwind 2.2.2 åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œå¦åˆ™ä¸º `colors.lightBlue`ï¼‰å¹¶å°† gray æ”¹ä¸º `colors.gray` æ¥æ¢å¤åˆ°ä»¥å‰çš„ä¸»é¢˜ã€‚

ä» v1.1.2+ å¼€å§‹ï¼Œæ‚¨è¿˜å¯ä»¥é€šè¿‡ä¿®æ”¹ `css/prism.css` æ ·å¼è¡¨è½»æ¾è‡ªå®šä¹‰ä»£ç å—çš„æ ·å¼ã€‚Token ç±»åä¸ prismjs å…¼å®¹ï¼Œå› æ­¤æ‚¨å¯ä»¥å¤åˆ¶å’Œè°ƒæ•´ prismjs æ ·å¼è¡¨ä¸­çš„ token æ ·å¼ï¼Œä¾‹å¦‚ [prism themes](https://github.com/PrismJS/prism-themes)ã€‚

## Xdm MDX ç¼–è¯‘å™¨

æˆ‘ä»¬å°† MDX æ†ç»‘å™¨ä» [next-mdx-remote](https://github.com/hashicorp/next-mdx-remote) åˆ‡æ¢åˆ° [mdx-bundler](https://github.com/kentcdodds/mdx-bundler)ã€‚
è¿™åœ¨åº•å±‚ä½¿ç”¨ [xdm](https://github.com/wooorm/xdm)ï¼Œæœ€æ–°çš„ micromark 3 å’Œ remarkã€rehype åº“ã€‚

**è­¦å‘Š**ï¼šå¦‚æœæ‚¨ä½¿ç”¨äº†è‡ªå®šä¹‰çš„ remark æˆ– rehype åº“ï¼Œè¯·å‡çº§åˆ°ä¸ micromark 3 å…¼å®¹çš„ç‰ˆæœ¬ã€‚å¦‚æœæ‚¨æ­£åœ¨å‡çº§ï¼Œè¯·åˆ é™¤ `node_modules` å’Œ `package-lock.json` ä»¥é¿å…è¿‡å»ä¾èµ–é¡¹ç›¸å…³çš„é—®é¢˜ã€‚

[xdm](https://github.com/wooorm/xdm) åŒ…å«äº†å¯¹ [@mdx-js/mdx](https://github.com/mdx-js/mdx) çš„å¤šé¡¹æ”¹è¿›ï¼Œè¿™æ˜¯ next-mdx-remote å†…éƒ¨ä½¿ç”¨çš„ç¼–è¯‘å™¨ï¼Œä½†å¯èƒ½å­˜åœ¨ä¸€äº›ç ´åæ€§è¡Œä¸ºæ›´æ”¹ã€‚
è¯·æ£€æŸ¥æ‚¨çš„ markdown è¾“å‡ºä»¥ç¡®è®¤ã€‚

ä¸€äº›æ–°çš„å¯èƒ½æ€§åŒ…æ‹¬ç›´æ¥åœ¨ mdx æ–‡ä»¶ä¸­ä½¿ç”¨å¯¼å…¥è¯­æ³•åŠ è½½ç»„ä»¶ï¼Œä»¥åŠåŒ…å«å¯åœ¨æ„å»ºæ­¥éª¤ä¸­ç¼–è¯‘å’Œæ†ç»‘çš„ js ä»£ç ã€‚

ä¾‹å¦‚ï¼Œä»¥ä¸‹ jsx ç‰‡æ®µå¯ä»¥ç›´æ¥åœ¨ MDX æ–‡ä»¶ä¸­ä½¿ç”¨ä»¥æ¸²æŸ“é¡µé¢æ ‡é¢˜ç»„ä»¶ï¼š

```jsx
// æˆ–è€…å¦‚æœä½¿ç”¨ jsï¼Œå¯¼å…¥ PageTitle from './components/PageTitle.js'
import PageTitle from './components/PageTitle.tsx'
;<PageTitle> åœ¨ MDX ä¸­ä½¿ç”¨ JSX ç»„ä»¶ </PageTitle>
```

é»˜è®¤é…ç½®ä¼šè§£æ `components` ç›®å½•ä¸­çš„æ‰€æœ‰ç»„ä»¶ã€‚

**æ³¨æ„**ï¼š
éœ€è¦å¤–éƒ¨å›¾åƒåŠ è½½å™¨çš„ç»„ä»¶è¿˜éœ€è¦é¢å¤–çš„ esbuild é…ç½®ã€‚
ä¾èµ–äºç”Ÿå‘½å‘¨æœŸä¸­å…¨å±€åº”ç”¨ç¨‹åºçŠ¶æ€çš„ç»„ä»¶ï¼Œå¦‚ Nextjs çš„ `Link` ç»„ä»¶ï¼Œåœ¨æ­¤è®¾ç½®ä¸­ä¹Ÿæ— æ³•å·¥ä½œï¼Œå› ä¸ºæ¯ä¸ª mdx æ–‡ä»¶éƒ½æ˜¯ç‹¬ç«‹æ„å»ºçš„ã€‚
å¯¹äºè¿™ç§æƒ…å†µï¼Œæœ€å¥½ä½¿ç”¨ç»„ä»¶æ›¿æ¢ã€‚

## ç›®å½•ç»„ä»¶

å— [Docusaurus](https://docusaurus.io/docs/next/markdown-features/inline-toc) å’Œ Gatsby çš„ [gatsby-remark-table-of-contents](https://www.gatsbyjs.com/plugins/gatsby-remark-table-of-contents/) å¯å‘ï¼Œ
åŒ…å«æ–‡æ¡£æ‰€æœ‰é¡¶çº§æ ‡é¢˜çš„ `toc` å˜é‡è¢«ä¼ é€’åˆ° MDX æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ç›¸åº”åœ°è¿›è¡Œæ ·å¼è®¾ç½®ã€‚
ä¸ºäº†ç®€åŒ–ç”Ÿæˆç›®å½•ï¼ˆTOCï¼‰ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç°æœ‰çš„ `TOCInline` ç»„ä»¶ã€‚

ä¾‹å¦‚ï¼Œè¿™ç¯‡æ–‡ç« ä¸­çš„ TOC æ˜¯ç”¨ä»¥ä¸‹ä»£ç ç”Ÿæˆçš„ï¼š

```jsx
<TOCInline toc={props.toc} exclude="Overview" toHeading={2} />
```

æ‚¨å¯ä»¥é€šè¿‡é…ç½® `fromHeading` å’Œ `toHeading` å±æ€§æ¥è‡ªå®šä¹‰æ˜¾ç¤ºçš„æ ‡é¢˜ï¼Œæˆ–è€…é€šè¿‡å°†å­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²æ•°ç»„ä¼ é€’ç»™ `exclude` å±æ€§æ¥æ’é™¤ç‰¹å®šæ ‡é¢˜ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æ·±åº¦ä¸º 3 æˆ–æ›´å°çš„æ ‡é¢˜éƒ½ä¼šç¼©è¿›ã€‚è¿™å¯ä»¥é€šè¿‡æ›´æ”¹ `indentDepth` å±æ€§æ¥é…ç½®ã€‚
å¯ä»¥ä½¿ç”¨ `asDisclosure` å±æ€§åœ¨å¯å±•å¼€çš„æŠ«éœ²å…ƒç´ ä¸­æ¸²æŸ“ TOCã€‚

ä»¥ä¸‹æ˜¯å®Œæ•´ TOC åœ¨æŠ«éœ²å…ƒç´ ä¸­æ¸²æŸ“çš„ç¤ºä¾‹ã€‚

```jsx
<TOCInline toc={props.toc} asDisclosure />
```

<TOCInline toc={props.toc} asDisclosure />

## å¸ƒå±€

æ‚¨å¯ä»¥é€šè¿‡é…ç½® frontmatter å­—æ®µå°† mdx åšå®¢å†…å®¹æ˜ å°„åˆ°å¸ƒå±€ç»„ä»¶ã€‚ä¾‹å¦‚ï¼Œè¿™ç¯‡æ–‡ç« æ˜¯ç”¨æ–°çš„ `PostSimple` å¸ƒå±€å†™çš„ï¼

### æ·»åŠ æ–°æ¨¡æ¿

å¸ƒå±€æ¨¡æ¿å­˜å‚¨åœ¨ `./layouts` æ–‡ä»¶å¤¹ä¸­ã€‚æ‚¨å¯ä»¥å°†æƒ³è¦æ˜ å°„åˆ° markdown å†…å®¹çš„ React ç»„ä»¶æ·»åŠ åˆ°æ­¤æ–‡ä»¶å¤¹ä¸­ã€‚
ç»„ä»¶æ–‡ä»¶åå¿…é¡»ä¸ markdown frontmatter `layout` å­—æ®µä¸­æŒ‡å®šçš„åŒ¹é…ã€‚

å”¯ä¸€å¿…éœ€çš„å­—æ®µæ˜¯ `children`ï¼Œå®ƒåŒ…å«æ¸²æŸ“çš„ MDX å†…å®¹ï¼Œå°½ç®¡æ‚¨å¯èƒ½å¸Œæœ›ä¼ é€’ frontMatter å†…å®¹å¹¶åœ¨æ¨¡æ¿ä¸­æ¸²æŸ“å®ƒã€‚

æ‚¨å¯ä»¥é…ç½®æ¨¡æ¿ä»¥æ¥æ”¶å…¶ä»–å­—æ®µ - è¯·å‚é˜… `PostLayout` ç»„ä»¶ç¤ºä¾‹ã€‚

è¿™æ˜¯ä¸€ä¸ªæ‚¨å¯ä»¥è¿›ä¸€æ­¥è‡ªå®šä¹‰çš„ç¤ºä¾‹å¸ƒå±€ï¼š

```jsx
export default function ExampleLayout({ frontMatter, children }) {
  const { date, title } = frontMatter

  return (
    <SectionContainer>
      <div>{date}</div>
      <h1>{title}</h1>
      <div>{children}</div>
    </SectionContainer>
  )
}
```

### é…ç½®åšå®¢æ–‡ç«  frontmatter

ä½¿ç”¨ `layout` frontmatter å­—æ®µæŒ‡å®šæ‚¨æƒ³è¦æ˜ å°„ markdown æ–‡ç« çš„æ¨¡æ¿ã€‚è¿™ç¯‡æ–‡ç« çš„ frontmatter å¦‚ä¸‹æ‰€ç¤ºï¼š

```
---
title: 'v1 ä¸­çš„æ–°åŠŸèƒ½'
date: '2021-05-26   '
tags: ['next-js', 'tailwind', 'guide']
draft: false
summary: 'ä»‹ç»æ–°çš„å¸ƒå±€åŠŸèƒ½ - æ‚¨å¯ä»¥é€šè¿‡é…ç½® frontmatter å­—æ®µå°† mdx åšå®¢å†…å®¹æ˜ å°„åˆ°å¸ƒå±€ç»„ä»¶'
layout: PostSimple
---
```

æ‚¨å¯ä»¥é€šè¿‡ä¿®æ”¹ `DEFAULT_LAYOUT` å˜é‡æ¥é…ç½®é¡µé¢éƒ¨åˆ†çš„é»˜è®¤å¸ƒå±€ã€‚
åšå®¢æ–‡ç« é¡µé¢çš„ `DEFAULT_LAYOUT` è®¾ç½®ä¸º `PostLayout`ã€‚

### æ‰©å±•

`layout` æ˜ å°„åˆ°åŒ…è£…æ•´ä¸ª MDX å†…å®¹çš„åŒ…è£…å™¨ã€‚

```jsx
export const MDXComponents = {
  Image,
  a: CustomLink,
  pre: Pre,
  wrapper: ({ components, layout, ...rest }) => {
    const Layout = require(`../layouts/${layout}`).default
    return <Layout {...rest} />
  },
}

export const MDXLayoutRenderer = ({ layout, mdxSource, ...rest }) => {
  const MDXLayout = useMemo(() => getMDXComponent(mdxSource), [mdxSource])

  return <MDXLayout layout={layout} components={MDXComponents} {...rest} />
}
```

åœ¨æ‚¨æƒ³è¦æ¥å—å¸ƒå±€åç§°ä»¥æ˜ å°„åˆ°æ‰€éœ€å¸ƒå±€çš„é¡µé¢ä¸Šä½¿ç”¨ `MDXLayoutRenderer` ç»„ä»¶ã€‚
æ‚¨éœ€è¦ä»å¸ƒå±€æ–‡ä»¶å¤¹ä¼ é€’å¸ƒå±€åç§°ï¼ˆå¿…é¡»å®Œå…¨åŒ¹é…ï¼‰ã€‚

## åˆ†æ

æ¨¡æ¿ç°åœ¨æ”¯æŒ [plausible](https://plausible.io/)ã€[simple analytics](https://simpleanalytics.com/) å’Œ google analyticsã€‚
åœ¨ `siteMetadata.js` ä¸­é…ç½®ä¸æ‰€éœ€åˆ†ææä¾›å•†ç›¸å¯¹åº”çš„è®¾ç½®ã€‚

```js
analytics: {
    // æ”¯æŒ plausible, simpleAnalytics æˆ– googleAnalytics
    plausibleDataDomain: '', // ä¾‹å¦‚ tailwind-nextjs-starter-blog.vercel.app
    simpleAnalytics: false, // true æˆ– false
    googleAnalyticsId: '', // ä¾‹å¦‚ UA-000000-2 æˆ– G-XXXXXXX
  },
```

ä¹Ÿæ”¯æŒè‡ªå®šä¹‰äº‹ä»¶ã€‚æ‚¨å¯ä»¥ä» `@components/analytics/[ANALYTICS-PROVIDER]` æ–‡ä»¶ä¸­å¯¼å…¥ `logEvent` å‡½æ•°ï¼Œå¹¶åœ¨è§¦å‘ç‰¹å®šäº‹ä»¶æ—¶è°ƒç”¨å®ƒã€‚_æ³¨æ„_ï¼šæ ¹æ®åˆ†ææä¾›å•†ï¼Œå¯èƒ½éœ€è¦é¢å¤–çš„é…ç½®ï¼Œè¯·æŸ¥çœ‹å…¶å®˜æ–¹æ–‡æ¡£äº†è§£æ›´å¤šä¿¡æ¯ã€‚

## åšå®¢è¯„è®ºç³»ç»Ÿ

æˆ‘ä»¬è¿˜æ·»åŠ äº†å¯¹ [giscus](https://github.com/laymonage/giscus)ã€[utterances](https://github.com/utterance/utterances) æˆ– disqus çš„æ”¯æŒã€‚
è¦å¯ç”¨ï¼Œè¯·åœ¨ `siteMetadata.js` è¯„è®ºå±æ€§ä¸­é…ç½®æ‰€éœ€çš„æä¾›å•†å’Œè®¾ç½®ï¼Œå¦‚é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šçš„ã€‚

```js
comment: {
    // é€‰æ‹©ä¸€ä¸ªæä¾›å•†å¹¶ä½¿ç”¨ä¸ä¹‹ç›¸å…³çš„ç¯å¢ƒå˜é‡
    // https://vercel.com/docs/environment-variables
    provider: 'giscus', // æ”¯æŒçš„æä¾›å•†ï¼šgiscus, utterances, disqus
    giscusConfig: {
      // è®¿é—®ä¸‹é¢çš„é“¾æ¥ï¼Œå¹¶æŒ‰ç…§'é…ç½®'éƒ¨åˆ†çš„æ­¥éª¤æ“ä½œ
      // https://giscus.app/
      repo: process.env.NEXT_PUBLIC_GISCUS_REPO,
      repositoryId: process.env.NEXT_PUBLIC_GISCUS_REPOSITORY_ID,
      category: process.env.NEXT_PUBLIC_GISCUS_CATEGORY,
      categoryId: process.env.NEXT_PUBLIC_GISCUS_CATEGORY_ID,
      mapping: 'pathname', // æ”¯æŒçš„é€‰é¡¹ï¼špathname, url, title
      reactions: '1', // è¡¨æƒ…ååº”ï¼š1 = å¯ç”¨ / 0 = ç¦ç”¨
      // å®šæœŸå°†è®¨è®ºå…ƒæ•°æ®å‘é€åˆ°çˆ¶çª—å£ï¼š1 = å¯ç”¨ / 0 = ç¦ç”¨
      metadata: '0',
      // ä¸»é¢˜ç¤ºä¾‹ï¼šlight, dark, dark_dimmed, dark_high_contrast
      // transparent_dark, preferred_color_scheme, custom
      theme: 'light',
      // æš—æ¨¡å¼æ—¶çš„ä¸»é¢˜
      darkTheme: 'transparent_dark',
      // å¦‚æœä¸Šé¢çš„ä¸»é¢˜é€‰é¡¹è®¾ç½®ä¸º'custom'
      // è¯·åœ¨ä¸‹é¢æä¾›è‡ªå®šä¹‰ä¸»é¢˜ css æ–‡ä»¶çš„é“¾æ¥ã€‚
      // ç¤ºä¾‹ï¼šhttps://giscus.app/themes/custom_example.css
      themeURL: '',
    },
    utterancesConfig: {
      // è®¿é—®ä¸‹é¢çš„é“¾æ¥ï¼Œå¹¶æŒ‰ç…§'é…ç½®'éƒ¨åˆ†çš„æ­¥éª¤æ“ä½œ
      // https://utteranc.es/
      repo: process.env.NEXT_PUBLIC_UTTERANCES_REPO,
      issueTerm: '', // æ”¯æŒçš„é€‰é¡¹ï¼špathname, url, title
      label: '', // æ ‡ç­¾ï¼ˆå¯é€‰ï¼‰ï¼šComment ğŸ’¬
      // ä¸»é¢˜ç¤ºä¾‹ï¼šgithub-light, github-dark, preferred-color-scheme
      // github-dark-orange, icy-dark, dark-blue, photon-dark, boxy-light
      theme: '',
      // æš—æ¨¡å¼æ—¶çš„ä¸»é¢˜
      darkTheme: '',
    },
    disqus: {
      // https://help.disqus.com/en/articles/1717111-what-s-a-shortname
      shortname: process.env.NEXT_PUBLIC_DISQUS_SHORTNAME,
    },
  },
```

## å¤šä½ä½œè€…

ä½œè€…ä¿¡æ¯ç°åœ¨ä» `siteMetadata.js` ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œå­˜å‚¨åœ¨è‡ªå·±çš„ `data/authors` æ–‡ä»¶å¤¹ä¸­çš„ markdown æ–‡ä»¶ä¸­ã€‚æœ€å°‘ï¼Œæ‚¨éœ€è¦æœ‰ä¸€ä¸ªåŒ…å«ä½œè€…ä¿¡æ¯çš„ `default.md` æ–‡ä»¶ã€‚æ‚¨å¯ä»¥æ ¹æ®éœ€è¦åˆ›å»ºé¢å¤–çš„æ–‡ä»¶ï¼Œæ–‡ä»¶åå°†ç”¨ä½œä½œè€…çš„å¼•ç”¨ã€‚

ä½œè€… markdown æ–‡ä»¶å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š

```md:default.md
---
name: Tails Azimuth
avatar: /static/images/avatar.png
occupation: å¤§æ°”ç§‘å­¦æ•™æˆ
company: æ–¯å¦ç¦å¤§å­¦
email: address@yoursite.com
twitter: https://twitter.com/Twitter
linkedin: https://www.linkedin.com
github: https://github.com
---

æ‚¨çš„é•¿æè¿°...
```

æ‚¨å¯ä»¥åœ¨æ¨¡æ¿çš„å¤šä¸ªä½ç½®ä½¿ç”¨æ­¤ä¿¡æ¯ã€‚ä¾‹å¦‚åœ¨é¡µé¢çš„å…³äºéƒ¨åˆ†ï¼Œæˆ‘ä»¬ç”¨ä»¥ä¸‹ä»£ç è¡Œè·å–é»˜è®¤ä½œè€…ä¿¡æ¯ï¼š

```js
const authorDetails = await getFileBySlug('authors', ['default'])
```

è¿™åœ¨ `AuthorLayout` æ¨¡æ¿ä¸­æ¸²æŸ“ã€‚

### åšå®¢æ–‡ç« ä¸­çš„å¤šä½ä½œè€…

åšå®¢æ–‡ç« çš„ frontmatter æ¥å—ä¸€ä¸ªå¯é€‰çš„ `authors` æ•°ç»„å­—æ®µã€‚å¦‚æœæœªæŒ‡å®šå­—æ®µï¼Œåˆ™å‡å®šä½¿ç”¨é»˜è®¤ä½œè€…ã€‚åªéœ€ä¼ å…¥ä½œè€…æ•°ç»„å³å¯æ¸²æŸ“ä¸æ–‡ç« ç›¸å…³çš„å¤šä½ä½œè€…ã€‚

ä¾‹å¦‚ï¼Œä»¥ä¸‹ frontmatter å°†æ˜¾ç¤º `data/authors/default.md` å’Œ `data/authors/sparrowhawk.md` ä¸­çš„ä½œè€…

```yaml
title: 'æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« '
date: '2021-01-12'
draft: false
summary: 'æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« '
authors: ['default', 'sparrowhawk']
```

åœ¨ [ä»‹ç» Tailwind Nextjs å¯åŠ¨åšå®¢æ–‡ç« ](/blog/introducing-tailwind-nextjs-starter-blog) ä¸­å±•ç¤ºäº†å¤šä½ä½œè€…æ–‡ç« çš„æ¼”ç¤ºã€‚

## ä»£ç å—å¤åˆ¶æŒ‰é’®

å°†é¼ æ ‡æ‚¬åœåœ¨ä»£ç å—ä¸Šï¼Œæ‚¨ä¼šæ³¨æ„åˆ°ä¸€ä¸ª GitHub é£æ ¼çš„å¤åˆ¶æŒ‰é’®ï¼æ‚¨å¯ä»¥ä¿®æ”¹ `./components/Pre.js` ä»¥è¿›ä¸€æ­¥è‡ªå®šä¹‰å®ƒã€‚
è¯¥ç»„ä»¶ä¼ é€’ç»™ `MDXComponents` å¹¶ä¿®æ”¹æ‰€æœ‰ `<pre>` å—ã€‚

## è¡Œé«˜äº®å’Œè¡Œå·

ç”±äºæ–°çš„ [rehype-prism-plus æ’ä»¶](https://github.com/timlrx/rehype-prism-plus)ï¼Œè¡Œé«˜äº®å’Œè¡Œå·ç°åœ¨å¼€ç®±å³ç”¨

ä»¥ä¸‹ javascript ä»£ç å—ï¼š

````
```js {1, 3-4} showLineNumbers
var num1, num2, sum
num1 = prompt('è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—')
num2 = prompt('è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—')
sum = parseInt(num1) + parseInt(num2) // "+" è¡¨ç¤º"ç›¸åŠ "
alert('å’Œ = ' + sum) // "+" è¡¨ç¤ºç»„åˆæˆå­—ç¬¦ä¸²
```
```

å°†æ˜¾ç¤ºä¸ºï¼š

```js {1,3-4} showLineNumbers
var num1, num2, sum
num1 = prompt('è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—')
num2 = prompt('è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—')
sum = parseInt(num1) + parseInt(num2) // "+" è¡¨ç¤º"ç›¸åŠ "
alert('å’Œ = ' + sum) // "+" è¡¨ç¤ºç»„åˆæˆå­—ç¬¦ä¸²
```

è¦ä¿®æ”¹æ ·å¼ï¼Œè¯·åœ¨ `prism.css` æ–‡ä»¶ä¸­æ›´æ”¹ä»¥ä¸‹ç±»é€‰æ‹©å™¨ï¼š

```css
.code-highlight {
  @apply float-left min-w-full;
}

.code-line {
  @apply -mx-4 block border-l-4 border-opacity-0 pl-4 pr-4;
}

.code-line.inserted {
  @apply bg-green-500 bg-opacity-20;
}

.code-line.deleted {
  @apply bg-red-500 bg-opacity-20;
}

.highlight-line {
  @apply -mx-4 border-l-4 border-primary-500 bg-gray-700 bg-opacity-50;
}

.line-number::before {
  @apply -ml-2 mr-4 inline-block w-4 text-right text-gray-400;
  content: attr(line);
}
```

## é‚®ä»¶è®¢é˜…ç»„ä»¶ (v1.1.3)

v1.1.3 ä¸­å¼•å…¥çš„é‚®ä»¶è®¢é˜…ç»„ä»¶ä¸ºæ‚¨æä¾›äº†ä¸€ç§è½»æ¾å»ºç«‹å—ä¼—çš„æ–¹æ³•ã€‚å®ƒä¸ä»¥ä¸‹æä¾›å•†é›†æˆï¼š

- [Mailchimp](https://mailchimp.com/)
- [Buttondown](https://buttondown.email/)
- [Convertkit](https://convertkit.com/)

è¦ä½¿ç”¨å®ƒï¼Œè¯·åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šæ‚¨æ­£åœ¨ä½¿ç”¨çš„æä¾›å•†ï¼Œå¹¶å°†å¿…è¦çš„ç¯å¢ƒå˜é‡æ·»åŠ åˆ° `.env` æ–‡ä»¶ä¸­ã€‚
æœ‰å…³æ‰€éœ€å˜é‡çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ `.env.sample`ã€‚

å¯¼å‡ºäº†ä¸¤ä¸ªç»„ä»¶ï¼Œé»˜è®¤çš„ `NewsletterForm` å’Œ `BlogNewsletterForm` ç»„ä»¶ï¼Œåè€…ä¹Ÿä½œä¸º MDX ç»„ä»¶ä¼ é€’ï¼Œå¯ä»¥åœ¨åšå®¢æ–‡ç« ä¸­ä½¿ç”¨ï¼š

```jsx
<BlogNewsletterForm title="å–œæ¬¢æ‚¨æ­£åœ¨é˜…è¯»çš„å†…å®¹å—ï¼Ÿ" />
```

<BlogNewsletterForm title="å–œæ¬¢æ‚¨æ­£åœ¨é˜…è¯»çš„å†…å®¹å—ï¼Ÿ" />

è¯¥ç»„ä»¶ä¾èµ–äº nextjs çš„ [API è·¯ç”±](https://nextjs.org/docs/api-routes/introduction)ï¼Œéœ€è¦è®¾ç½® nextjs çš„æœåŠ¡å™¨ç«¯å®ä¾‹ï¼Œä¸ 100% é™æ€ç«™ç‚¹å¯¼å‡ºä¸å…¼å®¹ã€‚ç”¨æˆ·åº”è‡ªè¡Œæ‰˜ç®¡æˆ–ä½¿ç”¨æ”¯æŒæ­¤åŠŸèƒ½çš„å…¼å®¹å¹³å°ï¼Œå¦‚ Vercel æˆ– Netlifyã€‚

é™æ€ç«™ç‚¹å…¼å®¹çš„æ›¿ä»£æ–¹æ¡ˆæ˜¯åœ¨é‚®ä»¶è®¢é˜…ç»„ä»¶ä¸­ç”¨è¡¨å• API ç«¯ç‚¹æä¾›å•†æ›¿æ¢è·¯ç”±ã€‚

## å‚è€ƒæ–‡çŒ®å’Œå¼•ç”¨ (v1.2.1)

`rehype-citation` æ’ä»¶å·²æ·»åŠ åˆ° v1.2.1 ä¸­çš„ xdm å¤„ç†ç®¡é“ã€‚è¿™ä½¿æ‚¨å¯ä»¥è½»æ¾æ ¼å¼åŒ–å¼•ç”¨å¹¶ä»ç°æœ‰çš„ bibtex æˆ– CSL-json æ–‡ä»¶æ’å…¥å‚è€ƒæ–‡çŒ®ã€‚

ä¾‹å¦‚ï¼Œä»¥ä¸‹ markdown ä»£ç ç¤ºä¾‹ï¼š

```md
æ ‡å‡†å¼•ç”¨ [@Nash1950]
å†…æ–‡å¼•ç”¨ ä¾‹å¦‚ @Nash1951
å¤šä¸ªå¼•ç”¨ [å‚è§ @Nash1950; @Nash1951, ç¬¬ 50 é¡µ]

**å‚è€ƒæ–‡çŒ®ï¼š**

[^ref]
```

æ¸²æŸ“ä¸ºä»¥ä¸‹å†…å®¹ï¼š

æ ‡å‡†å¼•ç”¨ [@Nash1950]  
å†…æ–‡å¼•ç”¨ ä¾‹å¦‚ @Nash1951  
å¤šä¸ªå¼•ç”¨ [å‚è§ @Nash1950; @Nash1951, ç¬¬ 50 é¡µ]

**å‚è€ƒæ–‡çŒ®ï¼š**

[^ref]

å‚è€ƒæ–‡çŒ®å°†åœ¨æ–‡æ¡£æœ«å°¾æ’å…¥ï¼Œä½†å¯ä»¥é€šè¿‡åœ¨é¢„æœŸä½ç½®æŒ‡å®š `[^Ref]` æ ‡ç­¾æ¥è¦†ç›–ã€‚æ’ä»¶ä½¿ç”¨ APA å¼•ç”¨æ ¼å¼ï¼Œä½†ä¹Ÿæ”¯æŒä»¥ä¸‹ CSL æ ¼å¼ï¼š'apa'ã€'vancouver'ã€'harvard1'ã€'chicago'ã€'mla'ï¼Œæˆ–ç”¨æˆ·æŒ‡å®šçš„ CSL æ–‡ä»¶è·¯å¾„ã€‚

è¯·å‚é˜… [rehype-citation readme](https://github.com/timlrx/rehype-citation) äº†è§£é…ç½®é€‰é¡¹çš„æ›´å¤šä¿¡æ¯ã€‚

## è‡ªæ‰˜ç®¡å­—ä½“ (v1.5.0)

Google å­—ä½“å·²è¢« [Fontsource](https://fontsource.org/) çš„è‡ªæ‰˜ç®¡å­—ä½“æ›¿æ¢ã€‚è¿™å¸¦æ¥äº†ä»¥ä¸‹ [ä¼˜åŠ¿](https://fontsource.org/docs/introduction)ï¼š

> è‡ªæ‰˜ç®¡å¸¦æ¥äº†æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼Œå› ä¸ºä»æ‰˜ç®¡æœåŠ¡ï¼ˆå¦‚ Google Fontsï¼‰åŠ è½½å­—ä½“ä¼šå¯¼è‡´é¢å¤–çš„ï¼ˆæ¸²æŸ“é˜»å¡ï¼‰ç½‘ç»œè¯·æ±‚ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¯¹äºç®€å•ç½‘ç«™ï¼Œè¿™å¯èƒ½ä¼šä½¿è§†è§‰åŠ è½½æ—¶é—´ç¿»å€ã€‚
>
> å­—ä½“ä¿æŒç‰ˆæœ¬é”å®šã€‚Google ç»å¸¸åœ¨æ²¡æœ‰é€šçŸ¥çš„æƒ…å†µä¸‹æ¨é€å­—ä½“æ›´æ–°ï¼Œè¿™å¯èƒ½ä¼šå½±å“æ‚¨å®æ—¶çš„ç”Ÿäº§é¡¹ç›®ã€‚åƒç®¡ç†ä»»ä½•å…¶ä»– NPM ä¾èµ–é¡¹ä¸€æ ·ç®¡ç†æ‚¨çš„å­—ä½“ã€‚
>
> ä¿æŠ¤éšç§ã€‚Google ä¼šè·Ÿè¸ªå…¶å­—ä½“çš„ä½¿ç”¨æƒ…å†µï¼Œå¯¹äºé‚£äº›æåº¦å…³æ³¨éšç§çš„äººæ¥è¯´ï¼Œè‡ªæ‰˜ç®¡æ˜¯ä¸€ç§æ›¿ä»£æ–¹æ¡ˆã€‚

è¿™å¯¼è‡´äº†æ›´å°çš„å­—ä½“åŒ…å’Œ 0.1 ç§’æ›´å¿«çš„åŠ è½½æ—¶é—´ ([webpagetest æ¯”è¾ƒ](https://www.webpagetest.org/video/compare.php?tests=220201_AiDcFH_f68a69b758454dd52d8e67493fdef7da,220201_BiDcMC_bf2d53f14483814ba61e794311dfa771))ã€‚

è¦æ›´æ”¹é»˜è®¤çš„ Inter å­—ä½“ï¼š

1. å®‰è£…é¦–é€‰çš„ [å­—ä½“](https://fontsource.org/fonts) - `npm install -save @fontsource/<font-name>`
2. æ›´æ–° `pages/_app.js` ä¸­çš„å¯¼å…¥ - `import '@fontsource/<font-name>.css'`
3. æ›´æ–° tailwind css é…ç½®æ–‡ä»¶ä¸­çš„ `fontfamily` å±æ€§

## å‡çº§æŒ‡å—

ä» v0 åˆ° v1 çš„ä»£ç ä¸­æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†å‘ç”Ÿäº†å˜åŒ–ï¼ŒåŒ…æ‹¬å¯¹å¸ƒå±€çš„æ”¯æŒå’Œæ–°çš„ mdx å¼•æ“ã€‚

å¦‚æœä¹‹å‰çš„ç‰ˆæœ¬æ»¡è¶³æ‚¨çš„éœ€æ±‚ï¼Œä¹Ÿæ²¡æœ‰çœŸæ­£ç†ç”±è¿›è¡Œæ›´æ”¹ï¼Œå¯èƒ½å°†æ‚¨æ„Ÿå…´è¶£çš„ç»„ä»¶æ›´æ”¹å¤åˆ¶åˆ°ç°æœ‰åšå®¢æ¯”è¿ç§»æ‰€æœ‰å†…å®¹æ›´å®¹æ˜“ã€‚

å°½ç®¡å¦‚æ­¤ï¼Œå¦‚æœæ‚¨æƒ³è¿™æ ·åšä¸”æ²¡æœ‰å¯¹æ¨¡æ¿è¿›è¡Œå¤ªå¤šæ›´æ”¹ï¼Œæ‚¨å¯ä»¥å…‹éš†æ–°ç‰ˆæœ¬å¹¶å°†åšå®¢æ–‡ç« å¤åˆ¶åˆ°æ–°æ¨¡æ¿ã€‚

å¦ä¸€ç§é€‰æ‹©æ˜¯ä½¿ç”¨ä»¥ä¸‹ä»£ç æ‹‰å–æœ€æ–°æ¨¡æ¿ç‰ˆæœ¬ï¼š

```bash
git remote add template git@github.com:timlrx/tailwind-nextjs-starter-blog.git
git pull template v1 --allow-unrelated-histories
rm -rf node_modules
```

æ‚¨å¯ä»¥åœ¨æˆ‘çš„ä¸ªäººåšå®¢çš„è¿™ä¸ª [æäº¤](https://github.com/timlrx/timlrx.com/commit/bba1c185384fd6d5cdaac15abf802fdcff027286) ä¸­çœ‹åˆ°æ­¤ç±»è¿ç§»çš„ç¤ºä¾‹ã€‚

v1 ä¹Ÿä½¿ç”¨ `feed.xml` è€Œä¸æ˜¯ `index.xml`ï¼Œä»¥é¿å… Vercel çš„ä¸€äº›æ„å»ºé—®é¢˜ã€‚å¦‚æœæ‚¨æ­£åœ¨è¿ç§»ï¼Œåº”åœ¨ `next.config.js` ä¸­æ·»åŠ é‡å®šå‘ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```js
async redirects() {
  return [
    {
      source: '/:path/index.xml',
      destination: '/:path/feed.xml',
      permanent: true,
    }
  ]
}
```